<!DOCTYPE html>
<!--[if lt IE 7]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7]>	  <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8]>	  <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class='no-js' lang='en'>
  <!--<![endif]-->
  <head>
    <meta charset='utf-8'>
    <title>City Council Map of NYC</title>
    <meta content='width=device-width, initial-scale=1.0' name='viewport'>
    <link href="../stylesheets/global.css" media="all" rel="stylesheet" type="text/css" />
    <link href="../stylesheets/layout.css" media="all and (min-width: 33.236em)" rel="stylesheet" type="text/css" />
    <link href="../stylesheets/libraries/hljs.css" media="all" rel="stylesheet" type="text/css" />
    <style>
      /* line 1, (__TEMPLATE__) */
      h1, h2, h3, h4, h5, h6 {
        text-align: center; }
    </style>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/headjs/1.0.3/head.min.js" type="text/javascript"></script>
    <script>
      function getRandomColor() {
          var letters = '0123456789ABCDEF'.split('');
          var color = '#';
          for (var i = 0; i < 6; i++ ) {
              color += letters[Math.round(Math.random() * 15)];
          }
          return color;
      }
      
      head.load(
      	"//cdnjs.cloudflare.com/ajax/libs/d3/3.4.2/d3.min.js",
      	"//cdnjs.cloudflare.com/ajax/libs/topojson/1.1.0/topojson.min.js",
      	"../javascripts/hljs.min.js",
      	function() {					
      		var width = 960,
      		    height = 800;
      
      		var projection = d3.geo.mercator()
      		      .center([-73.94, 40.70])
      		      .scale(width * 80)
      		      .translate([(width) / 2, (height)/2]);
      
      		var path = d3.geo.path().projection(projection);
      
      		var svg = d3.select("#container section").append("svg")
      		    .attr("width", width)
      		    .attr("height", height);
      
      		d3.json("data/nycc.json", function(error, topology) {
      			var subunits = topojson.feature(topology, topology.objects.nycc).features;
      			svg.selectAll(".subunit")
      				.data(subunits)
      				.enter().append("path")
      				.attr("class", function(d) { return "subunit " + d.id; })
      			    .attr("d", path)
      				.style("fill", function(d) { return getRandomColor();})
      				.style("opacity", "0.8");
      			 
      		});
      	}
      );
    </script>
  </head>
  <body>
    <div id='container'>
      <section>
        <h1>Map of NYC</h1>
      </section>
      <section>
        <h2>Source Code</h2>
        <pre><code class="language-javascript">function getRandomColor() {&#x000A;    var letters = '0123456789ABCDEF'.split('');&#x000A;    var color = '#';&#x000A;    for (var i = 0; i &lt; 6; i++ ) {&#x000A;        color += letters[Math.round(Math.random() * 15)];&#x000A;    }&#x000A;    return color;&#x000A;}&#x000A;&#x000A;var width = 960,&#x000A;    height = 800;&#x000A;&#x000A;var projection = d3.geo.mercator()&#x000A;      .center([-73.94, 40.70])&#x000A;      .scale(width * 80)&#x000A;      .translate([(width) / 2, (height)/2]);&#x000A;&#x000A;var path = d3.geo.path().projection(projection);&#x000A;&#x000A;var svg = d3.select("#container section").append("svg")&#x000A;    .attr("width", width)&#x000A;    .attr("height", height);&#x000A;&#x000A;d3.json("data/nycc.json", function(error, topology) {&#x000A;	var subunits = topojson.feature(topology, topology.objects.nycc).features;&#x000A;	svg.selectAll(".subunit")&#x000A;		.data(subunits)&#x000A;		.enter().append("path")&#x000A;		.attr("class", function(d) { return "subunit " + d.id; })&#x000A;	    .attr("d", path)&#x000A;		.style("fill", function(d) { return getRandomColor();})&#x000A;		.style("opacity", "0.8");&#x000A; &#x000A;});&#x000A;</code></pre>
      </section>
    </div>
  </body>
</html>
