<!DOCTYPE html>
<!--[if lt IE 7]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7]>	  <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8]>	  <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class='no-js' lang='en'>
  <!--<![endif]-->
  <head>
    <meta charset='utf-8'>
    <title>
      Data Viz: Week 3 Notes
    </title>
    <meta content='width=device-width, initial-scale=1.0' name='viewport'>
    <link href="../stylesheets/global.css" media="all" rel="stylesheet" type="text/css" />
    <link href="../stylesheets/layout.css" media="all and (min-width: 33.236em)" rel="stylesheet" type="text/css" />
    <link href="../stylesheets/libraries/hljs.css" media="all" rel="stylesheet" type="text/css" />
    <script src="../javascripts/hljs.min.js" type="text/javascript"></script>
  </head>
  <body>
    <div id='container'>
      <section>
        <h1 id="week-3">Week 3</h1>
        
        <p><strong><a href="..">« Back to Main Page</a></strong></p>
        
        <h2 id="making-geojson">Making GeoJSON</h2>
        
        <p>Making GeoJSON is trickier than I thought. I downloaded some .SHP files from <a href="http://www.nyc.gov/html/dcp/html/bytes/dwndistricts.shtml">Bytes of the Big Apple</a>, and converted them to <a href="https://github.com/mbostock/topojson">TopoJSON</a> using <a href="http://bost.ocks.org/mike/map/">every tutorial on the Internet</a>. It did not produce happy results (browser crashes, black boxes, noise, etc.).</p>
        
        <p>I found another project that on <a href="http://github.com">GitHub</a> that was using the same dataset as I was. I downloaded <a href="https://raw.github.com/abmagil/manhattan/master/manhattan_testbed/public/javascripts/nybb.geojson">their GeoJSON</a>. Comparing my GeoJSON to theirs, I knew something was off with the conversion from the .SHP file. Googling around, I found a <a href="http://ben.balter.com/2013/06/26/how-to-convert-shapefiles-to-geojson-for-use-on-github/">tutorial on converting Shape files to GeoJSON for GitHub</a>. It turns out ogr2ogr was <a href="data/nybb_13a/nybb-geo.json">producing wacky coordinates</a> because I wasn’t providing it with the proper projection information (I don’t know exactly what this means; or even if this is totally what is happening). Based on the tutorial, however, the actual command to convert Shape to GeoJSON for D3 is:</p>
        
        <pre><code class="language-bash">$ ogr2ogr -f GeoJSON -t_srs crs:84 [name].geojson [name].shp
        </code></pre>
        
        <p>The <code>-t_srs crs:84</code> is a kind of Mercator projection and, anyway, it made a GeoJSON file that rendered in D3 and converted to working Topojson. Also, I’m learning a little more about working with these tools. I was able to properly convert to working TopoJSON using the following command:</p>
        
        <pre><code class="language-bash">$ topojson --id-property BoroCode -p name=BoroName -p name -o nybb.json nybb-geo.json
        </code></pre>
        
        <p>Fun times!</p>
        
        <h2 id="stuff-i-made">Stuff I Made</h2>
        
        <ul>
          <li>Working with <a href="http://suffenus.wordpress.com/2014/01/07/making-interactive-maps-with-d3-for-total-beginners/">Michael’s tutorial</a>, I made <a href="us.html">this page</a>
            <ul>
              <li>Then I learned how to use <code>d3.behavior.zoom()</code> to make it zoom.</li>
            </ul>
          </li>
          <li>Working through <a href="http://bost.ocks.org/mike/map/">this tutorial</a>, I made <a href="uk.html">this map of the UK</a>.</li>
          <li>Finally, on my own, I drew <a href="boroughs.html">New York City</a>, in <a href="council.html">two ways</a>.</li>
        </ul>
        
        <p>There’s also this, though:</p>
        
        <h3 id="nyc-boroughs">NYC Boroughs</h3>
        
        <script src="https://embed.github.com/view/geojson/oncomouse/data-viz/master/source/week3/data/nybb.json"></script>
        
        <h3 id="nyc-city-council-districts">NYC City Council Districts</h3>
        
        <script src="https://embed.github.com/view/geojson/oncomouse/data-viz/master/source/week3/data/nycc.json"></script>
        
        <h2 id="cool-stuff">Cool Stuff</h2>
        
        <p><img alt="Visualizing the Anthropocene" src="http://imgs.xkcd.com/comics/land_mammals.png" /></p>
      </section>
    </div>
    <script>
      //hljs.configure({classPrefix: ''});
      hljs.initHighlightingOnLoad();
    </script>
  </body>
</html>
